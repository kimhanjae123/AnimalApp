<!DOCTYPE html>
<html lang="en">

<head>
	<!-- page_title -->
	<th:block th:replace="~{fragments/page_title :: page_title}" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>


<!-- 헤더링크 -->
<th:block th:replace="~{fragments/header_link :: header_link}" />

<body>
  <!-- Header Section Begin -->
  <th:block th:replace="~{fragments/header :: header}" />
  <!-- Header End -->

  <div class="container">


    <h2>봉사활동 모집 게시판</h2>
    <div class="form1">
	     <div class="form-group row">
	     	<div class="col-sm-11">
          		<input type="text" class="form-control" id="search" name="search" th:value="${keyword != null ? keyword : ''}" placeholder="제목 혹은 보호소명으로 검색해 주세요.">
        	</div>
        	<div class="col-sm-1">
        		<button class="btn btn-outline-secondary" type="button" id="bt_search">검색</button>
      		</div>
	     </div>
    </div>

    <table class="table table-striped">
      <thead>
        <tr>
          <th>No.</th>
          <th>제목</th>
          <th>날짜및시간</th>
          <th>모집인원</th>
          <th>보호소</th>
          <th>게시한날짜</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="vol , i : ${volunteerList}">
          <td th:text="${pager.num - i.index}"></td>
          <td>
            <a th:href="@{/volunteer/detail(id=${vol.vol_event_post_idx})}" th:text="${vol.title}"></a>
          </td>
          <td th:text="${vol.vol_date}"></td>
          <td th:text="${vol.recruit_count}"></td>
          <td th:text="${vol.shelter_name}"></td>
          <td th:text="${vol.regdate}"></td>
        </tr>
      </tbody>
    </table>
<!-- Pagination -->
    <div class="product__pagination">
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">

          <li class="page-item" th:class="${pager.firstPage == 1 ? 'disabled' : ''}">
            <a class="page-link" href="#" th:href="@{/volunteer/list(currentPage=${pager.firstPage-1}, keyword=${keyword})}"
              aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Previous</span>
            </a>
          </li>

          <li th:each="i : ${#numbers.sequence(pager.firstPage , pager.lastPage)}"
            th:class="${pager.currentPage==i? 'page-item active':'page-item'}">
            <a class="page-link" th:href="@{/volunteer/list(currentPage=${i}, keyword=${keyword})}" th:text="${i}"></a>
          </li>

          <li class="page-item" th:class="${pager.lastPage == pager.totalPage ? 'disabled' : ''}">
            <a class="page-link" href="#" th:href="@{/volunteer/list(currentPage=${pager.lastPage+1}, keyword=${keyword})}"
              aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
            </a>
          </li>

        </ul>
      </nav>

    </div>
<!--/Pagination -->

    <div class="card-footer">
      <button type="button" class="btn btn-secondary col-12" id="bt_regist">등록</button>
    </div>
  </div>
  <br>
   <!-- Footer Section Begin -->
    <th:block th:replace="~{fragments/footer :: footer}" />
    <!-- Footer End -->
</body>
<script type="text/javascript">
  $(function () {
    $("#bt_regist").click(function () {
      //글쓰기 폼 요청
      location.href = "/volunteer/writeform";
    });
  });
  $(function () {
	    $("#bt_search").click(function () {
	    	var searchKeyword = $("#search").val();
	        
	        // URL에 검색어 파라미터 추가하여 이동
	        location.href = "/volunteer/list?keyword=" + encodeURIComponent(searchKeyword);
	    });
	});
  $(function () {
	    $("#search").keypress(function (e) {
	        // 눌러진 키의 이름 가져오기
	        var keyName = e.key;

	        // 눌러진 키가 'Enter'인지 확인
	        if (keyName === 'Enter') {
	            // 검색 버튼 클릭
	            $("#bt_search").click();
	        }
	    });
	});


</script>

</html>
